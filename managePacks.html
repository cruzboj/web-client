<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Packs</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Custom Font -->
  <link href="https://fonts.googleapis.com/css2?family=Gruppo&display=swap" rel="stylesheet" />

  <style>
    .sidebar {
      height: 100vh;
      width: 220px;
      background-color: #0d6efd;
      color: white;
      padding-top: 1rem;
      position: fixed;
    }

    .sidebar a {
      color: white;
      text-decoration: none;
      display: block;
      padding: 10px 20px;
      transition: background 0.3s;
    }

    .sidebar a:hover {
      background-color: #0b5ed7;
    }

    .main-content {
      margin-left: 220px;
      padding: 20px;
    }

    .custom-row {
      height: 300px;
    }

    .row .col {
      align-self: start;
    }
    
    /* costom col */
    .tall-col {
      height: 100%;
    }

    /* gif css */
    .gif-url {
      font-size: 0.8rem;
      word-break: break-word;
    }

    .gif-box {
      max-width: 200px;
    }
  </style>

</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar">
    <h4 class="text-center">
        <img src="{url}" alt="Profile" class="rounded-circle mb-3" width="80" height="80">
    </h4>
    <a href="admin.html">Dashboard</a>
    <a href="adminData.html">User Data</a>
    <a href="#">Manage Packs</a>
    <a href="index.html">Back to Site</a>

    <hr class="bg-light">
    <a href="#">Settings</a>
    <a href="#">Logout</a>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="container-fluid">
      <h1>Manage Packs</h1>

      <div class="container text-center">
        <!-- ‚úÖ ◊©◊û◊ï◊® ◊ê◊™ ◊©◊ú◊ï◊© ◊î◊¢◊û◊ï◊ì◊ï◊™ ◊ë◊ê◊ï◊™◊î row -->
        <div class="row custom-row">
          <div class="col bg-warning tall-col">
            <h1>Packs</h1>
            <table class="table">
              <thead>
                <tr><th>#id</th><th>card name</th><th>description</th><th>url</th></tr>
              </thead>
              <tbody class="table-group-divider">
                <tr>
                  <th>1</th>
                  <td>Mark</td>
                  <td>Otto</td>
                  <td onclick="makeEditable(this)">https://media0.giphy.com/media/abc123/giphy.gif</td>
                </tr>
                <tr>
                  <th>2</th>
                  <td>Jacob</td>
                  <td>Thornton</td>
                  <td onclick="makeEditable(this)">https://media0.giphy.com/media/abc123/giphy.gif</td>
                </tr>
                <tr>
                  <th>3</th>
                  <td>John</td>
                  <td>Doe</td>
                  <td onclick="makeEditable(this)">https://media0.giphy.com/media/abc123/giphy.gif</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="col bg-info">
            <h1> pack > cards </h1>
            <table class="table">
                <thead>
                  <tr><th>#id</th><th>card name</th><th>description</th><th>url</th></tr>
                </thead>
                <tbody class="table-group-divider">
                  <tr>
                    <th>1</th>
                    <td>Mark</td>
                    <td>Otto</td>
                    <td onclick="makeEditable(this)">https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExcmR2bjBiOHVpenV1eHJrMjMzeTNyeDdrcG1pYzNrOGo1Zm82OWluaiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/pq2pU6B2Ht3pu/giphy.gif</td>
                  </tr>
                  <tr>
                    <th>2</th>
                    <td>Jacob</td>
                    <td>Thornton</td>
                    <td onclick="(this)">https://media0.giphy.com/media/abc123/giphy.gif</td>
                  </tr>
                  <tr>
                    <th>3</th>
                    <td>John</td>
                    <td>Doe</td>

                  </tr>
                </tbody>
              </table>
          </div>

          <div class="col bg-secondary">
            <h5 class="mb-3">üîç Search for a GIF</h5>
            <div class="input-group mb-3">
              <input type="text" id="searchInput" class="form-control" placeholder="Enter a search term..." />
              <button class="btn btn-primary" onclick="searchGifs()">Search</button>
            </div>
            <div id="results" class="d-flex flex-wrap justify-content-center"></div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- ‚úÖ JS ◊ë◊°◊ï◊£ -->
  <script>
    const API_KEY = "nJ0ypZg0zYl1Xaqe1Xndxq7vHptaNIEc";

    function shortenUrl(url) {
        try {
            const u = new URL(url);
            return u.hostname + '/‚Ä¶/' + u.pathname.split('/').pop();
        } catch {
            return url;
        }
    }

    function searchGifs() {
      const query = document.getElementById("searchInput").value.trim();
      if (!query) return;

      const url = `https://api.giphy.com/v1/gifs/search?api_key=${API_KEY}&q=${encodeURIComponent(query)}&limit=5`;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          const resultsDiv = document.getElementById("results");
          resultsDiv.innerHTML = "";

          data.data.forEach(gif => {
            const imgUrl = gif.images.original.url;

            const container = document.createElement("div");
            container.className = "gif-box m-2 text-center";

            const img = document.createElement("img");
            img.src = imgUrl;
            img.alt = gif.title;
            img.classList.add("img-fluid");

            const urlText = document.createElement("div");
            urlText.className = "gif-url text-white";
            urlText.textContent = shortenUrl(imgUrl);
            urlText.style.cursor = "pointer";

            urlText.addEventListener("click", () => {
            const input = document.createElement("input");
            input.type = "text";
            input.value = imgUrl;
            input.className = "form-control mt-1";
            
            urlText.replaceWith(input);
            input.focus();

            input.addEventListener("blur", () => {
                const newUrl = input.value;
                const newDiv = document.createElement("div");
                newDiv.className = "gif-url text-white";
                newDiv.textContent = shortenUrl(newUrl);
                newDiv.style.cursor = "pointer";

                newDiv.addEventListener("click", () => {
                input.value = newUrl;
                newDiv.replaceWith(input);
                input.focus();
                });

                input.replaceWith(newDiv);
            });
            });

            container.appendChild(img);
            container.appendChild(urlText);
            resultsDiv.appendChild(container);
          });
        })
        .catch(error => {
          console.error("Error fetching GIFs:", error);
        });
    }
  </script>

<script>
function makeEditable(cell) {
  const currentText = cell.textContent.trim();

  if (cell.querySelector("input")) return;

  cell.innerHTML = "";

  const input = document.createElement("input");
  input.type = "text";
  input.value = currentText;
  input.className = "form-control";

  const btnConfirm = document.createElement("button");
  btnConfirm.textContent = "‚úîÔ∏è";
  btnConfirm.className = "btn btn-success btn-sm ms-1";

  const btnCancel = document.createElement("button");
  btnCancel.textContent = "‚úñÔ∏è";
  btnCancel.className = "btn btn-danger btn-sm ms-1";

  cell.appendChild(input);
  cell.appendChild(btnConfirm);
  cell.appendChild(btnCancel);
  input.focus();

  btnConfirm.addEventListener("click", e => {
    e.stopPropagation(); // ◊û◊ï◊†◊¢ ◊î◊™◊§◊©◊ò◊ï◊™ ◊ê◊ô◊®◊ï◊¢
    const newValue = input.value.trim();
    cell.innerHTML = "";
    cell.textContent = newValue;
    cell.setAttribute("onclick", "makeEditable(this)");
  });

  btnCancel.addEventListener("click", e => {
    e.stopPropagation(); // ◊û◊ï◊†◊¢ ◊î◊™◊§◊©◊ò◊ï◊™ ◊ê◊ô◊®◊ï◊¢
    cell.innerHTML = "";
    cell.textContent = currentText;
    cell.setAttribute("onclick", "makeEditable(this)");
  });
}
  </script>
  
</body>
</html>
